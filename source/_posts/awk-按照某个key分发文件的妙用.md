---
title: awk 按照某个key分发文件的妙用
date: 2017-09-19 14:45:19
tags: shell awk 
toc: true
comments: true
---
## 需求背景：
>本来的需求是提取一个月的数据，但是出来以后产品又要拆分为每天的量

## 技术实现
>本来打算使用python foreach去解决，但是想到以前用过awk处理过类似的问题，乍一看日期后面还有时分秒，必然又用到了substr，妙的是awk也支持，脚本如下：

``` bash
awk -F ',' '{print $3  >substr($2,1,10)".csv"}' sy*.txt;
```
>完美的解决了我的问题，第二列是时间(带有时分秒,日期格式为2017-06-13的样式)，第三列为个人标示，唯一标示一条记录，当然你也可以使用$0，完成真正意义上的拆分文件。

``` bash
awk -F ',' '{print $0 >substr($2,1,10)".csv"}'  sy*.txt;
```
